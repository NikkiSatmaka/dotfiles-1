; TODO:
; - add mail
; - add gpu on/off indicator
; - fix headphone indicator; switch to script
;   https://github.com/jaagr/polybar/issues/578#issuecomment-301122388
; - change underline/fg color for high cpu/ram
; - truncation of volume/brightness (maybe)
; Nice:
; - support for  system tray
; - support for percentages for padding/width
; - modules
; Annoyances:
; - can't do float percentages it seems (for offsets at least)
; - bspwm module can't distinguish between focused occupied and focused empty
; - can't locally override line-size or other settings it seems
; - module naming and functionality inconsistencies

[colors]
background = #222
background-alt = #444
foreground = #dfdfdf
foreground-alt = #555
primary = #ffb52a
focused-foreground = #de935f
monitor-foreground = #8dbcdf
state-foreground = #90a959
secondary = #e60053
alert = #bd2c40
music = #a9D152
title = #78b3cc
; ram = #7549d6
ram = #5e28d4
cpu = #905eff
temperature = #cf1020
; battery
charging = #cc6666
discharging = #ac4142
full = #8c9440
; brightness = #de935f
brightness = #de925e
brightness-empty = #524236
volume = #2a7a9c
; volume-empty = #2d3c46
volume-empty = #2a3d4e
volume-mute = #ac4142
network = #81a2be
time = #a84d95

[bar/mine]
width = ${env:BAR_WIDTH:100%}
height = ${env:BAR_HEIGHT:2%}
offset-x = ${env:BAR_X_OFFSET:0}
offset-y = ${env:BAR_Y_OFFSET:0}

padding-left = 1
padding-right = 1
radius = 0
; fixed-center = false
border-size = ${env:BAR_BORDER:0}
; TODO better color
border-color = #555753

line-size = 2
line-color = #f00

module-margin-left = 0
module-margin-right = 2

background = ${colors.background}
foreground = ${colors.foreground}

; order matters (first have priority)
font-0 = benis uushi:pixelsize=10
font-1 = IPAGothic:pixelsize=10:weight=bold
font-2 = Unifont:style=Sans-Serif
font-3 = Wuncon Siji:pixelsize=9
font-4 = Symbola:pixelsize=10
font-5 = FuraMonoForPowerline NF:pixelsize=9

modules-left = wm bspwm mpd
modules-center = title
modules-right = redshift memory cpu temperature battery backlight volume date wlan eth

tray-position = right
tray-padding = 2

; necessary so panel doesn't cover fullscreen windows
wm-restack = bspwm

[settings]
screenchange-reload = true

[global/wm]
; top_padding
margin-top = 2%
margin-bottom = 0

[module/wm]
type = custom/text
content = î€Ž bspwm
content-foreground = #ff6666

[module/bspwm]
type = internal/bspwm

; show workspaces from other monitors
pin-workspaces = false

; TODO only show monitor if more than 1
format = "<label-monitor> <label-state> <label-mode> "

label-monitor-foreground = ${colors.monitor-foreground}

label-tiled-foreground = ${colors.state-foreground}
label-monocle-foreground = ${colors.state-foreground}

label-focused = %name%
label-focused-foreground = ${colors.focused-foreground}
label-focused-underline= ${colors.primary}
label-focused-margin-left = 1

label-occupied = %name%
label-occupied-margin-left = 1

label-empty-foreground = ${colors.foreground-alt}
; TODO why does this need to be different?
label-empty-margin-left = 0

label-urgent = %name%
label-urgent-background = ${colors.alert}
label-urgent-margin-left = 1

label-monocle = M
label-tiled = T
label-fullscreen = F
label-floating = FL
label-pseudotiled = P
label-locked = L
label-locked-foreground = #bd2c40
label-sticky = S
label-sticky-foreground = #fba922
label-private = P
label-private-foreground = #bd2c40

[module/mpd]
type = custom/script
exec = ~/bin/song_scroll
tail = true

label-foreground = ${colors.music}

[module/title]
type = custom/script
exec = ~/bin/title_scroll
tail = true

label-foreground = ${colors.title}

; [module/filesystem]
; type = internal/fs
; interval = 25

; mount-0 = /
; mount-1 = /home

; label-mounted = %{F#0a81f5}%mountpoint%%{F-}: %percentage_used%%
; label-unmounted = %mountpoint% not mounted
; label-unmounted-foreground = ${colors.foreground-alt}

; [module/xkeyboard]
; type = internal/xkeyboard
; blacklist-0 = num lock

; format-prefix = "î‰¯ "
; format-prefix-foreground = ${colors.foreground-alt}
; format-prefix-underline = ${colors.secondary}

; label-layout = %layout%
; label-layout-underline = ${colors.secondary}

; label-indicator-padding = 2
; label-indicator-margin = 1
; label-indicator-background = ${colors.secondary}
; label-indicator-underline = ${colors.secondary}

[module/redshift]
type = custom/script
interval = 5

format-font = 5

exec = ~/.config/polybar/redshift.sh

[module/memory]
type = internal/memory
interval = 3

format-prefix = "î€¨ "
format-prefix-foreground = ${colors.ram}
; format-prefix-foreground = ${colors.foreground-alt}

label = %percentage_used%%

[module/cpu]
type = internal/cpu
interval = 3

format-prefix = "î€¦ "
format-prefix-foreground = ${colors.cpu}
; format-prefix-foreground = ${colors.foreground-alt}

label = %percentage%%

[module/temperature]
type = internal/temperature
interval = 5

warn-temperature = 75

format = <ramp> <label>
format-underline =
format-warn = <ramp> <label-warn>

label = %temperature-c%
label-warn = %temperature-c%
label-warn-foreground = ${colors.temperature}
label-warn-underline = ${colors.temperature}

ramp-0 = îƒ‰
ramp-1 = îƒŠ
ramp-2 = îƒ‹
ramp-foreground = ${colors.temperature}
; ramp-foreground = ${colors.foreground-alt}

[module/battery]
type = internal/battery
battery = BAT0
adapter = AC
; full-at = 99

format-charging = <animation-charging> <label-charging>
label-charging = %percentage%%

format-discharging = <ramp-capacity> <label-discharging>
format-discharging-underline =

format-full-prefix = "îˆº "
format-full-prefix-foreground = ${colors.full}
; format-full-prefix-foreground = ${colors.foreground-alt}

ramp-capacity-0 = îˆ¶
ramp-capacity-1 = îˆ·
ramp-capacity-2 = îˆ¸
ramp-capacity-foreground = ${colors.discharging}
; ramp-capacity-foreground = ${colors.foreground-alt}

animation-charging-0 = îˆ¶
animation-charging-1 = îˆ·
animation-charging-2 = îˆ¸
animation-charging-foreground = ${colors.charging}
; animation-charging-foreground = ${colors.foreground-alt}
animation-charging-framerate = 1500

[module/backlight]
type = internal/backlight
card = intel_backlight

format = <label> <bar>

label = â˜¼
label-foreground = ${colors.brightness}
label-font = 5

bar-width = 10
bar-indicator =
bar-indicator-foreground = #ff
bar-fill = â”€
bar-fill-foreground = ${colors.brightness}
bar-empty = â”€
bar-empty-foreground = ${colors.brightness-empty}
; bar-empty-foreground = ${colors.foreground-alt}

; [module/backlight-acpi]
; inherit = module/xbacklight
; type = internal/backlight
; card = intel_backlight

[module/volume]
type = internal/alsa

format-volume = <ramp-volume> <bar-volume>

ramp-volume-0 = ðŸ”ˆ
ramp-volume-1 = ðŸ”‰
ramp-volume-2 = ðŸ”Š
ramp-volume-foreground = ${colors.volume}

; bigger?
ramp-headphones-0 = ï€¥
ramp-headphones-foreground = ${colors.volume}
; ramp-headphones-font = 4

format-muted-prefix = "îˆ‚ "
format-muted-foreground = ${colors.volume-mute}
; format-muted-foreground = ${colors.foreground-alt}
; label-muted = sound muted

bar-volume-width = 10
bar-volume-foreground-0 = ${colors.volume}
bar-volume-foreground-1 = ${colors.volume}
bar-volume-foreground-2 = ${colors.volume}
bar-volume-foreground-3 = ${colors.volume}
bar-volume-foreground-4 = ${colors.volume}
bar-volume-foreground-5 = ${colors.volume}
bar-volume-foreground-6 = #ff5555
bar-volume-gradient = false
bar-volume-indicator =
bar-volume-fill = â”€
bar-volume-empty = â”€
bar-volume-empty-foreground = ${colors.volume-empty}
; bar-volume-empty-foreground = ${colors.foreground-alt}

[module/date]
type = internal/date
interval = 5

format-prefix = "î€– "
format-prefix-foreground = ${colors.time}
; format-prefix-foreground = ${colors.foreground-alt}
format-underline =


label = %date% %time%
label-foreground = ${colors.time}

date = %a %d
date-alt = %Y-%m-%d

time = %I: %M%P
time-alt = %I: %M%P

[module/wlan]
type = internal/network
; TODO command for
interface = wlp4s0
interval = 5

format-connected = <ramp-signal> <label-connected>
format-connected-underline =
format-connected-foreground = ${colors.network}
label-connected =
; label-connected = %essid%

format-disconnected =

ramp-signal-0 = îˆ˜
ramp-signal-1 = îˆ™
ramp-signal-2 = îˆš
ramp-signal-3 = îˆš
ramp-signal-4 = îˆš
; ramp-signal-foreground = ${colors.network}
; ramp-signal-foreground = ${colors.foreground-alt}

[module/eth]
type = internal/network
; TODO command for
interface = enp0s31f6
interval = 5

format-connected-underline =
format-connected-prefix = "î†œ "
; format-connected-prefix-foreground = ${colors.foreground-alt}
label-connected = %local_ip%

format-disconnected =
