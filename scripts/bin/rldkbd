#!/usr/bin/env bash
xdotool keyup control alt shift Mode_switch super

# set up keyboard layout

# using these as thumbkeys (see ~/.config/sxhkd/sxhkdrc)
xinput --set-button-map "TPPS/2 IBM TrackPoint" 50 1 51
xinput --set-button-map "ETPS/2 Elantech TrackPoint" 50 1 51
xinput --set-button-map "Elan TrackPoint" 50 3 51
# enable tap to click on touch pad
xinput set-prop "Elan Touchpad" "libinput Tapping Enabled" 1

if [[ $1 == kmonad ]]; then
	kmonad ~/dotfiles/remap/.colemak-DH-custom.kbd
else
	if [[ -n $1 ]]; then
		# regenerate layout
		klfc --from-json ~/dotfiles/remap/.colemak-DH-custom.json \
			 --xkb ~/dotfiles/remap/xkb
	fi
	~/dotfiles/remap/xkb/run-session.sh -m Wide
fi

rldxcape
